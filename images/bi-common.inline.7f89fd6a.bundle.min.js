"use strict";(self.webpackJsonp__wix_thunderbolt_app=self.webpackJsonp__wix_thunderbolt_app||[]).push([[507],{9492:(e,t,r)=>{r.d(t,{O$:()=>s,lR:()=>a,u6:()=>o});const o=Symbol.for("BI"),s=Symbol.for("WixBiSessionSymbol"),a=Symbol.for("appName")},25196:(e,t,r)=>{var o,s;r.d(t,{lF:()=>o,mY:()=>a,w4:()=>s}),function(e){e[e.START=1]="START",e[e.VISIBLE=2]="VISIBLE",e[e.PAGE_FINISH=33]="PAGE_FINISH",e[e.FIRST_CDN_RESPONSE=4]="FIRST_CDN_RESPONSE",e[e.TBD=-1]="TBD",e[e.PAGE_NAVIGATION=101]="PAGE_NAVIGATION",e[e.PAGE_NAVIGATION_DONE=103]="PAGE_NAVIGATION_DONE"}(o||(o={})),function(e){e[e.NAVIGATION=1]="NAVIGATION",e[e.DYNAMIC_REDIRECT=2]="DYNAMIC_REDIRECT",e[e.INNER_ROUTE=3]="INNER_ROUTE",e[e.NAVIGATION_ERROR=4]="NAVIGATION_ERROR",e[e.CANCELED=5]="CANCELED"}(s||(s={}));const a={1:"page-navigation",2:"page-navigation-redirect",3:"page-navigation-inner-route",4:"navigation-error",5:"navigation-canceled"}},27037:(e,t,r)=>{r.d(t,{h:()=>a});var o=r(65672);const s=({useBatch:e=!0,publishMethod:t=o.PublishMethods.Auto,endpoint:r,muteBi:s=!1,biStore:a,sessionManager:i,fetch:n,factory:p})=>p({useBatch:e,publishMethod:t,endpoint:r}).setMuted(s).withUoUContext({msid:a.msid}).withNonEssentialContext({visitorId:()=>i.getVisitorId(),siteMemberId:()=>i.getSiteMemberId()}).updateDefaults({vsi:a.viewerSessionId,_av:`thunderbolt-${a.viewerVersion}`,isb:a.is_headless,...a.is_headless&&{isbr:a.is_headless_reason}}),a={createBaseBiLoggerFactory:s,createBiLoggerFactoryForFedops:e=>{const{biStore:{session_id:t,initialTimestamp:r,initialRequestTimestamp:o,dc:a,microPop:i,is_headless:n,isCached:p,pageData:d,rolloutData:c,caching:l,checkVisibility:u=()=>"",viewerVersion:m,requestUrl:h,st:I,isSuccessfulSSR:f,mpaSessionId:S},muteBi:g=!1}=e;return s({...e,muteBi:g}).updateDefaults({ts:()=>Date.now()-r,tsn:()=>function({initialRequestTimestamp:e}){return"undefined"==typeof window?Math.round(performance.now()+(performance.timeOrigin-e)):Math.round(performance.now())}({initialRequestTimestamp:o}),dc:a,microPop:i,caching:l,session_id:t,st:I,url:h||d.pageUrl,ish:n,pn:d.pageNumber,isFirstNavigation:1===d.pageNumber,pv:u,pageId:d.pageId,isServerSide:!1,isSuccessfulSSR:f,is_lightbox:d.isLightbox,is_cached:p,is_sav_rollout:c.siteAssetsVersionsRollout?1:0,is_dac_rollout:c.isDACRollout?1:0,v:m,mpaSessionId:S})}}},36451:(e,t,r)=>{r.d(t,{W:()=>c});var o=r(76022),s=r(5189),a=r(45124),i=r(75967),n=r(66715),p=r(76904),d=r(23184);const c=({biLoggerFactory:e,customParams:t={},phasesConfig:r="SEND_ON_FINISH",appName:c="thunderbolt",presetType:l=o.u.BOLT,reportBlackbox:u=!1,paramsOverrides:m={},factory:h,muteThunderboltEvents:I=!1,experiments:f={},monitoringData:S})=>{const g=h(c,{presetType:l,phasesConfig:r,isPersistent:!0,isServerSide:!1,reportBlackbox:u,customParams:t,biLoggerFactory:e,paramsOverrides:m,enableSampleRateForAppNames:(0,p.k)("specs.thunderbolt.fedops_enableSampleRateForAppNames",f)??("undefined"!=typeof window&&(0,p.k)("specs.thunderbolt.fedops_enableSampleRateForAppNames",f))}),{interactionStarted:A,interactionEnded:N,appLoadingPhaseStart:R,appLoadingPhaseFinish:_,appLoadStarted:b,appLoaded:v}=g,E=(0,p.k)("specs.thunderbolt.fedopsMuteErrors",f),D=(0,p.k)("specs.thunderbolt.panoramaInSsr",f),T=!1,w="undefined"==typeof window,O=e=>e.startsWith("platform_"),y=e=>e?.evid&&26===parseInt(e.evid,10),C=(()=>{const e=(0,n.n)();S?.viewerSessionId&&e.setSessionId(S.viewerSessionId);const r=S?.metaSiteId??"",o=S?.dc??"",s=!!S?.isHeadless,p=!!S?.isCached,d=!!S?.rolloutData?.isTBRollout,u=!!S?.rolloutData?.isDACRollout,m=!!S?.rolloutData?.siteAssetsVersionsRollout;return(0,a.V)({baseParams:{platform:i.OD.Viewer,msid:r,fullArtifactId:"com.wixpress.html-client.wix-thunderbolt",componentId:c},pluginParams:{useBatch:!0},data:{dataCenter:o,isHeadless:s,isCached:p,isRollout:d,isDacRollout:u,isSavRollout:m,isSsr:T,presetType:l,customParams:t},reporterOptions:w?{fetchFn:fetch}:{}}).withGlobalConfig(e).client()})(),B=e=>{!C||!D&&w||(e?C.reportLoadStart():C.reportLoadFinish())},L=(e,t,r)=>{if(!C)return;const o=e.replaceAll(" ","_");t?C.transaction(o).start(r):C.transaction(o).finish(r)},P=(e,t,r)=>"react-native"!==d.env.RENDERER_BUILD&&(y(r)?E:!((e,t,r)=>{const a=t?.siteAssetsModule??"";return!(l===o.u.BOLT)||s.EQ.has(e)||r&&["thunderbolt-css","thunderbolt-features","thunderbolt-platform"].includes(a)})(e,r,t)),V=(e,t,r,o)=>{if(s.iy.has(c))return!0;if(P(e,t,o))return!1;if(o?.siteAssetsModule)return!0;const a=!!r?.appId&&!s.S_.has(r.appId),i=s.S2.has(e),n=s.wV.has(e);return i||a||!n&&!I};return g.interactionStarted=(e,t)=>{if(y(t?.paramsOverrides)?((e={})=>{if(!C)return;const{errorInfo:t,errorType:r}=e,o=new Error(t);C?.errorMonitor().reportError(o,{errorName:r,environment:"Viewer"})})(t?.paramsOverrides):(D||O(e)||!w)&&L(e,!0),V(e,!0,void 0,t?.paramsOverrides))return A.call(g,e,t);try{performance.mark(`${e} started`)}catch(e){}return{timeoutId:0}},g.interactionEnded=(e,t)=>{if((D||O(e)||!w)&&L(e,!1),V(e,!0,void 0,t?.paramsOverrides))N.call(g,e,t);else try{performance.mark(`${e} ended`)}catch(e){}},g.appLoadingPhaseStart=(e,t)=>{if(L(e,!0,{appDefId:t?.appId,componentId:t?.widgetId}),V(e,!1,t))R.call(g,e,t);else try{performance.mark(`${e} started`)}catch(e){}},g.appLoadingPhaseFinish=(e,t,r)=>{if(L(e,!1,{appDefId:t?.appId,componentId:t?.widgetId}),V(e,!1,t))_.call(g,e,t,r);else try{performance.mark(`${e} finished`)}catch(e){}},g.appLoadStarted=e=>{B(!0),b.call(g,e)},g.appLoaded=e=>{B(!1),v.call(g,e)},g}},48631:(e,t,r)=>{r.d(t,{L:()=>i});var o=r(77748),s=r(26778),a=r(89330);const i=(0,o.Og)([],()=>({definition:s.FedopsLoggerDefinition,impl:a.FedopsLoggerService,config:{},platformConfig:{}}))},58839:(e,t,r)=>{r.d(t,{c:()=>o});const o=e=>{const t="thunderbolt-commons";return{reportAsyncWithCustomKey:(r,o,s)=>e.reportAsyncWithCustomKey(r,t,o,s),runAsyncAndReport:(r,o)=>e.runAsyncAndReport(r,t,o),runAndReport:(r,o)=>e.runAndReport(r,t,o),reportError:r=>{e.captureError(r,{tags:{feature:t,clientMetricsReporterError:!0}})},meter:(t,r)=>{e.meter(t,r)},histogram:(e,t)=>{}}}},97056:(e,t,r)=>{r.r(t),r.d(t,{createBiReporter:()=>i,site:()=>n});var o=r(9492),s=r(63590);const a=(...e)=>console.log("[TB] ",...e);function i(e=a,t=a,r=()=>{},o=a,s=a){return{reportBI:e,sendBeat:t,setDynamicSessionData:r,reportPageNavigation:o,reportPageNavigationDone:s}}const n=({biReporter:e,wixBiSession:t,viewerModel:r})=>a=>{a(o.O$).toConstantValue(t),a(o.u6).toConstantValue(e),a(o.lR).toConstantValue((0,s.f)(r))}}}]);
//# sourceMappingURL=https://static.parastorage.com/services/wix-thunderbolt/dist/bi-common.inline.7f89fd6a.bundle.min.js.map